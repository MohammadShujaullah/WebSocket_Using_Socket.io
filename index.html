<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>chat app</title>
</head>

<body>
    <h1>Chat App</h1>
    <input type="text" id="message" placeholder="Type your message here...">
    <button id="sendBtn">send</button>

    <div id="chat"></div>
    <script src="/socket.io/socket.io.js"></script>

    <script>
        // frontend JS is strart  from here ,  socket.io.js file ko include krna zaruri ha, jisse hum socket.io ke functions use kr skte hain
        const socket = io();

        const sendBtn = document.getElementById('sendBtn');
        const messageInput = document.getElementById('message');

        // socket.on('message', (msg) => {     // agr backend se "message" name ka koi event atta ha, to console.log kr do
        //     console.log(msg);
        // })

    //instead for consoleing the message fron backed, just add it into the frontend page
            socket.on('message',(msg)=>{
                const chatdiv=document.getElementById('chat');
                const messageElement=document.createElement('p');  // create a new paragraph element for each message
               messageElement.textContent=msg;
               chatdiv.appendChild(messageElement);  // append the new message element to the chat div
            })
         
      


        sendBtn.addEventListener('click', (e) => {
            e.preventDefault();
            const message = messageInput.value;

            // emits means send kro,   abb mai ise backend main bhi receive kr skta hu,
            //   (chat message) event ke through,  aur message data ke sath
            socket.emit('chat message', message);

            messageInput.value = '';   // send krne k bad input field ko clear kr do


        })





    </script>
</body>

</html>